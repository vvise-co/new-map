# ===========================================
# UNIFIED DEPLOYMENT ENVIRONMENT VARIABLES
# ===========================================
# For Koyeb/Railway where frontend + backend run in single container
# Copy this file to .env and fill in your values
#
# NOTE: No JWT_SECRET required! Token validation is done via introspection.
# NOTE: Backend serves static files directly (no nginx needed)

# Port (auto-set by Koyeb, default: 8000)
# PORT=8000

# ===========================================
# DATABASE (Required)
# ===========================================
# PostgreSQL connection string
DATABASE_URL=jdbc:postgresql://your-db-host/your-db-name
DATABASE_USERNAME=your-db-user
DATABASE_PASSWORD=your-db-password

# ===========================================
# AUTH SERVER (Required) - IMPORTANT!
# ===========================================
# URL of the CENTRAL AUTH SERVER (NOT this app!)
# This is where users authenticate and tokens are validated
# Used by both frontend (OAuth redirects) and backend (token introspection)
# Example: https://auth-server-xyz.koyeb.app
AUTH_SERVER_URL=https://your-auth-server.koyeb.app

# ===========================================
# APPLICATION URLs (Required)
# ===========================================
# This app's URL (for CORS)
# Example: https://my-client-app-xyz.koyeb.app
CORS_ALLOWED_ORIGINS=https://your-client-app.koyeb.app

# ===========================================
# OPTIONAL SETTINGS
# ===========================================
# Cache TTL for token introspection (seconds, default: 300 = 5 minutes)
# AUTH_CACHE_TTL=300

# App name (for logging)
# APP_NAME=your-project-name

# ===========================================
# KOYEB DEPLOYMENT
# ===========================================
# On Koyeb, set AUTH_SERVER_URL as BOTH:
#   1. Environment variable (for backend at runtime)
#   2. Build argument (for frontend at build time)
#
# The Dockerfile uses AUTH_SERVER_URL for both frontend and backend.

# ===========================================
# LOCAL DEVELOPMENT (Separate Services)
# ===========================================
# For local dev where frontend (5173), backend (8080), and auth (8081) run separately:
#
# DATABASE_URL=jdbc:postgresql://localhost:5432/your_db
# DATABASE_USERNAME=postgres
# DATABASE_PASSWORD=postgres
# AUTH_SERVER_URL=http://localhost:8081
# CORS_ALLOWED_ORIGINS=http://localhost:5173
#
# Frontend .env (frontend/.env):
# VITE_AUTH_SERVER_URL=http://localhost:8081

# ===========================================
# AUTH SERVER CONFIGURATION (on auth server side)
# ===========================================
# Make sure your auth server has this configured to allow redirects to your app:
#
# OAUTH2_ALLOWED_REDIRECT_DOMAINS=*.koyeb.app
#
# This allows the auth server to redirect back to any *.koyeb.app domain.
